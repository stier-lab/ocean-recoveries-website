---
import Layout from '@layouts/Layout.astro';
import WaveDivider from '@components/shared/WaveDivider.astro';
import { posts } from '@data/posts';

// Get 3 most recent news posts
const recentPosts = [...posts]
  .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())
  .slice(0, 3);

// Format date helper
const formatDate = (dateStr: string) => {
  return new Date(dateStr).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
  });
};
---

<Layout
  title="Ocean Recoveries Lab | Engineering Resilience from Organisms to Ecosystems"
  description="Research lab at UC Santa Barbara studying coral reef and kelp forest resilience. We trace the mechanisms of resistance, recovery, and reorganization to make restoration predictable."
  keywords={['Ocean Recoveries Lab', 'coral reef research', 'kelp forest ecology', 'marine conservation', 'UC Santa Barbara', 'Adrian Stier', 'ecosystem resilience']}
>
  <!-- Hero Section - Scientific Editorial Style -->
  <section class="hero">
    <div class="hero-media">
      <div class="hero-image" style="background-image: url('/images/coral-reef-panorama-anthias-fish.jpeg');"></div>
      <div class="hero-overlay"></div>
      <div class="hero-grain"></div>
    </div>


    <div class="hero-content">
      <div class="container">
        <!-- Editorial masthead -->
        <div class="hero-masthead scroll-reveal">
          <div class="masthead-line"></div>
          <span class="masthead-text">UC Santa Barbara</span>
          <div class="masthead-line"></div>
        </div>

        <!-- Main title - dramatic editorial treatment -->
        <div class="hero-title-block">
          <h1 class="hero-title scroll-reveal stagger-1">
            <span class="title-line title-line-1">Ocean</span>
            <span class="title-line title-line-2">
              <span class="title-serif">Recoveries</span>
            </span>
            <span class="title-line title-line-3">Lab</span>
          </h1>
        </div>

        <!-- Tagline with editorial flourish -->
        <div class="hero-tagline-wrapper scroll-reveal stagger-2">
          <div class="tagline-accent"></div>
          <p class="hero-tagline">
            Understanding <em>collapse</em>.<br />
            Designing <em>recovery</em>.
          </p>
        </div>

        <!-- Value proposition -->
        <p class="hero-desc scroll-reveal stagger-3">
          We identify what traps ecosystems in degraded states and what tips them back to recovery, building decision support for real-world management.
        </p>

        <!-- Actions row -->
        <div class="hero-actions scroll-reveal stagger-4">
          <a href="/research" class="btn-editorial-primary">
            <span class="btn-text">Explore Our Research</span>
            <span class="btn-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </span>
          </a>
          <a href="/join-us" class="btn-editorial-secondary">Join the Lab</a>
        </div>
      </div>
    </div>

    <!-- Scroll cue -->
    <div class="scroll-cue">
      <div class="scroll-cue-line"></div>
    </div>

    <WaveDivider id="hero-wave" fillColor="surface" />
  </section>

  <!-- Where We Work Section -->
  <section id="field-sites" class="field-sites">
    <div class="container">
      <!-- Section header -->
      <div class="section-header-editorial scroll-reveal">
        <div class="header-rule"></div>
        <div class="header-content">
          <span class="section-number">01</span>
          <div class="header-text">
            <span class="section-eyebrow">Field Sites</span>
            <h2 class="section-title-editorial">
              Where We<br />
              <span class="title-serif-accent">Work</span>
            </h2>
          </div>
        </div>
        <p class="section-desc-editorial">
          Two ecosystems. Two LTER sites. Two modes of collapse. By comparing fast kelp dynamics with slow coral recovery, we discover which resilience mechanisms generalize—and which are system-specific.
        </p>
      </div>


      <!-- Field Site Cards - Enhanced Layout -->
      <div class="sites-grid">
        <!-- Mo'orea Coral Reefs -->
        <a href="/research/coral-reefs" class="site-card site-card-coral scroll-reveal stagger-1">
          <div class="site-image">
            <img src="/images/cauliflower-coral-damselfish-reef.jpeg" alt="Coral reef ecosystem in Mo'orea" loading="lazy" />
            <div class="site-overlay"></div>
          </div>
          <div class="site-content">
            <div class="site-header">
              <div class="site-location">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                </svg>
                <span>Mo'orea, French Polynesia</span>
              </div>
              <span class="site-badge site-badge-coral">MCR LTER</span>
            </div>
            <h3 class="site-title">Coral Reefs</h3>
            <p class="site-dynamics">Slow collapse, chronic stress, multi-decade recovery</p>

            <div class="site-resilience">
              <h4 class="resilience-heading">Resilience dynamics:</h4>
              <ul class="resilience-list">
                <li><span class="r-label">Resistance</span> Colony stress tolerance, symbiont shuffling</li>
                <li><span class="r-label">Recovery</span> Wound healing, larval recruitment, spatial rescue</li>
                <li><span class="r-label">Reorganization</span> Community reassembly after bleaching</li>
              </ul>
            </div>

            <div class="site-cta">
              <span>Explore coral research</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </div>
          </div>
          <div class="site-accent"></div>
        </a>

        <!-- Santa Barbara Kelp Forests -->
        <a href="/research/kelp-forests" class="site-card site-card-kelp scroll-reveal stagger-2">
          <div class="site-image">
            <img src="/images/giant-kelp-sunlight-underwater.jpeg" alt="Kelp forest ecosystem in Santa Barbara" loading="lazy" />
            <div class="site-overlay"></div>
          </div>
          <div class="site-content">
            <div class="site-header">
              <div class="site-location">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                </svg>
                <span>Santa Barbara, California</span>
              </div>
              <span class="site-badge site-badge-kelp">SBC LTER</span>
            </div>
            <h3 class="site-title">Kelp Forests</h3>
            <p class="site-dynamics">Fast collapse, nonlinear dynamics, tipping points</p>

            <div class="site-resilience">
              <h4 class="resilience-heading">Resilience dynamics:</h4>
              <ul class="resilience-list">
                <li><span class="r-label">Resistance</span> Predator control of urchin grazing</li>
                <li><span class="r-label">Recovery</span> Spore dispersal, rapid canopy regrowth</li>
                <li><span class="r-label">Reorganization</span> Breaking urchin barrens, state shifts</li>
              </ul>
            </div>

            <div class="site-cta">
              <span>Explore kelp research</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </div>
          </div>
          <div class="site-accent"></div>
        </a>
      </div>
    </div>

    <WaveDivider id="sites-wave" fillColor="navy-deep" />
  </section>

  <!-- Recent News Section - Evidence of Impact -->
  <section class="news-section">
    <div class="news-bg">
      <div class="news-gradient-overlay"></div>
    </div>

    <div class="container relative z-10">
      <div class="news-header scroll-reveal">
        <div class="news-header-text">
          <span class="section-eyebrow section-eyebrow-light">Latest Findings</span>
          <h2 class="section-title-editorial section-title-light">What We're Discovering</h2>
        </div>
        <a href="/news" class="btn-outline-editorial hidden sm:inline-flex">
          <span>View all news</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>

      <div class="news-editorial-grid">
        {recentPosts.map((post, i) => (
          <article class={`news-editorial-card ${i === 0 ? 'news-featured' : ''} scroll-reveal stagger-${i + 1}`}>
            <a href={`/news/${post.slug}`} class="news-editorial-link">
              <div class="news-editorial-image">
                <img src={post.featuredImage} alt={post.title} loading={i === 0 ? 'eager' : 'lazy'} />
                <div class="news-image-overlay"></div>
              </div>
              <div class="news-editorial-body">
                <div class="news-meta">
                  <time class="news-date">{formatDate(post.date)}</time>
                  <span class="news-category">{post.tags[0]}</span>
                </div>
                <h3 class="news-editorial-title">{post.title}</h3>
                {i === 0 && <p class="news-editorial-excerpt">{post.excerpt}</p>}
                <span class="news-read-more">
                  Read article
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                  </svg>
                </span>
              </div>
            </a>
          </article>
        ))}
      </div>

      <div class="news-mobile-link scroll-reveal sm:hidden">
        <a href="/news" class="btn-outline-editorial">View All News</a>
      </div>
    </div>

    <WaveDivider id="news-wave" fillColor="surface" />
  </section>

  <!-- About Section -->
  <section class="about-section">
    <div class="container">
      <div class="about-editorial">
        <div class="about-content scroll-reveal">
          <span class="section-eyebrow">Our Lab</span>
          <h2 class="section-title-editorial">
            Based at<br />
            <span class="title-serif-accent">UC Santa Barbara</span>
          </h2>
          <p class="about-text">
            The Ocean Recoveries Lab is part of the Department of Ecology, Evolution & Marine Biology. We benefit from world-class marine facilities, the Santa Barbara Coastal LTER, and partnerships with the Moorea Coral Reef LTER.
          </p>

          <!-- PI Card -->
          <a href="/people" class="pi-editorial-card">
            <img src="/images/adrian.png" alt="Adrian Stier" class="pi-avatar" />
            <div class="pi-details">
              <span class="pi-name">Adrian Stier</span>
              <span class="pi-role">Associate Professor, EEMB</span>
              <span class="pi-bio">Long-term experiments at MCR and SBC LTER. 75+ papers on reef and kelp dynamics.</span>
            </div>
            <svg class="pi-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>

          <a href="/people" class="btn-editorial-primary btn-editorial-dark">
            <span class="btn-text">Meet the Team</span>
            <span class="btn-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </span>
          </a>
        </div>

        <div class="about-stats-grid">
          <div class="stat-editorial scroll-reveal stagger-1">
            <span class="stat-value" data-target="75">75</span>
            <span class="stat-suffix">+</span>
            <span class="stat-label">Publications</span>
          </div>
          <div class="stat-editorial scroll-reveal stagger-2">
            <span class="stat-value" data-target="15">15</span>
            <span class="stat-suffix">yrs</span>
            <span class="stat-label">Research</span>
          </div>
          <div class="stat-editorial scroll-reveal stagger-3">
            <span class="stat-value" data-target="2">2</span>
            <span class="stat-suffix"></span>
            <span class="stat-label">LTER Sites</span>
          </div>
          <div class="stat-editorial scroll-reveal stagger-4">
            <span class="stat-value" data-target="12">12</span>
            <span class="stat-suffix">+</span>
            <span class="stat-label">Partners</span>
          </div>
        </div>
      </div>
    </div>

    <WaveDivider id="about-wave" fillColor="navy-deep" />
  </section>

  <!-- Final CTA Section - Single Primary Action -->
  <section class="final-cta">
    <div class="final-cta-bg">
      <div class="cta-orb cta-orb-1"></div>
      <div class="cta-orb cta-orb-2"></div>
    </div>

    <div class="container relative z-10">
      <div class="cta-centered scroll-reveal">
        <span class="cta-editorial-eyebrow">Ready to Make an Impact?</span>
        <h2 class="cta-centered-title">
          Join the Next Generation of<br />
          <span class="title-serif-accent">Ocean Scientists</span>
        </h2>
        <p class="cta-centered-desc">
          We're seeking curious minds at all career stages—undergraduates, graduate students, and postdocs—who want to understand why ecosystems fail and what makes restoration succeed.
        </p>
        <div class="cta-centered-actions">
          <a href="/join-us" class="btn-cta-editorial btn-cta-primary">
            <span>View Open Positions</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
          <a href="/for-funders" class="btn-cta-link">
            Or partner with us as a funder →
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* ============================================
     Google Fonts - Playfair Display for Editorial Feel
     ============================================ */
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600&display=swap');

  /* ============================================
     Hero Section - Scientific Editorial
     ============================================ */
  .hero {
    @apply relative min-h-[100svh] flex items-center overflow-hidden;
  }

  .hero-media {
    @apply absolute inset-0;
  }

  .hero-image {
    @apply absolute inset-0 bg-cover bg-center bg-no-repeat;
    transform: scale(1.02);
    animation: heroZoom 25s ease-out forwards;
  }

  @keyframes heroZoom {
    from { transform: scale(1.02); }
    to { transform: scale(1); }
  }

  .hero-overlay {
    @apply absolute inset-0;
    background: linear-gradient(
      135deg,
      rgba(8, 15, 25, 0.97) 0%,
      rgba(8, 20, 35, 0.92) 40%,
      rgba(11, 37, 69, 0.7) 70%,
      rgba(11, 37, 69, 0.4) 100%
    );
  }

  .hero-grain {
    @apply absolute inset-0 pointer-events-none opacity-[0.04];
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }

  .hero-content {
    @apply relative z-10 w-full;
    padding-top: 5rem;
    padding-bottom: 3rem;
  }

  /* Masthead */
  .hero-masthead {
    @apply flex items-center gap-4 mb-6;
  }

  .masthead-line {
    @apply flex-1 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent;
  }

  .masthead-text {
    @apply text-[10px] font-bold uppercase tracking-[0.2em] text-white/50;
    @apply px-4;
  }

  /* Title block - Editorial treatment */
  .hero-title-block {
    @apply mb-5;
  }

  .hero-title {
    @apply leading-[0.95] tracking-[-0.02em];
  }

  .title-line {
    @apply block;
  }

  .title-line-1 {
    @apply text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black text-white;
    margin-left: -0.04em;
  }

  .title-line-2 {
    @apply text-4xl sm:text-5xl md:text-6xl lg:text-7xl;
    margin-left: 0.4em;
  }

  .title-serif {
    font-family: 'Playfair Display', Georgia, serif;
    @apply font-semibold italic;
    background: linear-gradient(135deg, #38bdf8 0%, #2dd4bf 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .title-line-3 {
    @apply text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black text-white;
    margin-left: 1.5em;
  }

  /* Tagline */
  .hero-tagline-wrapper {
    @apply flex items-start gap-4 mb-4 max-w-xl;
  }

  .tagline-accent {
    @apply w-1 flex-shrink-0 mt-1;
    @apply bg-gradient-to-b from-accent to-accent-2;
    height: 48px;
  }

  .hero-tagline {
    @apply text-lg md:text-xl text-white/80 leading-snug;
    font-weight: 400;
  }

  .hero-tagline em {
    font-family: 'Playfair Display', Georgia, serif;
    @apply text-accent not-italic font-medium;
  }

  .hero-desc {
    @apply text-sm md:text-base text-white/50 mb-6 leading-relaxed max-w-lg;
  }

  /* Actions */
  .hero-actions {
    @apply flex flex-wrap items-center gap-3;
  }

  .btn-editorial-primary {
    @apply relative inline-flex items-center gap-2 px-5 py-3;
    @apply bg-white text-navy-deep font-bold text-sm;
    @apply no-underline overflow-hidden;
    @apply transition-all duration-300;
  }

  .btn-editorial-primary::before {
    content: '';
    @apply absolute inset-0 bg-accent;
    transform: translateX(-101%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .btn-editorial-primary:hover::before {
    transform: translateX(0);
  }

  .btn-editorial-primary .btn-text,
  .btn-editorial-primary .btn-icon {
    @apply relative z-10 transition-colors duration-300;
  }

  .btn-editorial-primary:hover .btn-text,
  .btn-editorial-primary:hover .btn-icon {
    @apply text-white;
  }

  .btn-editorial-primary .btn-icon {
    @apply w-4 h-4;
  }

  .btn-editorial-primary.btn-editorial-dark {
    @apply bg-accent text-white;
  }

  .btn-editorial-primary.btn-editorial-dark::before {
    @apply bg-white;
  }

  .btn-editorial-primary.btn-editorial-dark:hover .btn-text,
  .btn-editorial-primary.btn-editorial-dark:hover .btn-icon {
    @apply text-navy-deep;
  }

  .btn-editorial-secondary {
    @apply inline-flex items-center px-5 py-3;
    @apply text-white font-bold text-sm;
    @apply border-2 border-white/40 no-underline;
    @apply transition-all duration-300;
  }

  .btn-editorial-secondary:hover {
    @apply border-white bg-white/10;
  }

  /* Scroll cue */
  .scroll-cue {
    @apply absolute bottom-6 left-1/2 -translate-x-1/2;
    animation: fadeIn 1s ease-out 1.5s forwards;
    opacity: 0;
  }

  @keyframes fadeIn {
    to { opacity: 1; }
  }

  .scroll-cue-line {
    @apply w-px h-8 bg-gradient-to-b from-transparent via-white/30 to-accent;
    animation: scrollPulse 2s ease-in-out infinite;
  }

  @keyframes scrollPulse {
    0%, 100% { opacity: 0.5; transform: scaleY(1); }
    50% { opacity: 1; transform: scaleY(1.1); }
  }

  /* ============================================
     Section Headers - Editorial Style
     ============================================ */
  .section-header-editorial {
    @apply mb-12;
  }

  .header-rule {
    @apply w-full h-px bg-gradient-to-r from-line via-line/50 to-transparent mb-8;
  }

  .header-rule-light {
    @apply bg-gradient-to-r from-white/20 via-white/10 to-transparent;
  }

  .header-content {
    @apply flex items-start gap-6 mb-6;
  }

  .section-number {
    @apply text-5xl font-black text-accent/20;
    font-variant-numeric: tabular-nums;
    line-height: 0.8;
  }

  .section-number-light {
    @apply text-accent/30;
  }

  .header-text {
    @apply flex flex-col gap-2;
  }

  .section-eyebrow {
    @apply text-[10px] font-bold uppercase tracking-[0.2em] text-accent;
  }

  .section-eyebrow-light {
    @apply text-accent-2;
  }

  .section-title-editorial {
    @apply text-3xl md:text-4xl lg:text-5xl font-black text-ink tracking-tight leading-[1.1];
  }

  .section-title-light {
    @apply text-white;
  }

  .title-serif-accent {
    font-family: 'Playfair Display', Georgia, serif;
    @apply font-semibold italic;
    background: linear-gradient(135deg, #38bdf8 0%, #2dd4bf 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .title-serif-inline {
    font-family: 'Playfair Display', Georgia, serif;
    @apply font-semibold italic text-accent;
  }

  .section-desc-editorial {
    @apply text-lg text-muted leading-relaxed max-w-2xl;
  }

  .section-desc-light {
    @apply text-white/50;
  }

  /* ============================================
     Field Sites - Where We Work
     ============================================ */
  .field-sites {
    @apply relative py-20 md:py-28 pb-28 md:pb-36 bg-surface;
  }

  .sites-grid {
    @apply grid md:grid-cols-2 gap-8 max-w-5xl mx-auto;
  }

  .site-card {
    @apply relative block rounded-2xl overflow-hidden no-underline;
    @apply bg-surface-card border border-line/50;
    transition: all 500ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .site-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.4);
  }

  .site-image {
    @apply relative h-48 overflow-hidden;
  }

  .site-image img {
    @apply w-full h-full object-cover;
    transform: scale(1.05);
    transition: transform 800ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .site-card:hover .site-image img {
    transform: scale(1.12);
  }

  .site-overlay {
    @apply absolute inset-0;
    background: linear-gradient(
      to top,
      rgba(10, 15, 25, 0.6) 0%,
      transparent 60%
    );
  }

  .site-content {
    @apply p-6 md:p-8;
  }

  .site-header {
    @apply flex flex-wrap items-center justify-between gap-3 mb-4;
  }

  .site-location {
    @apply inline-flex items-center gap-1.5;
    @apply text-xs font-bold uppercase tracking-wide text-muted;
  }

  .site-badge {
    @apply text-[10px] font-bold uppercase tracking-wider px-3 py-1 rounded-full;
  }

  .site-badge-coral {
    @apply bg-orange-500/20 text-orange-300 border border-orange-500/30;
  }

  .site-badge-kelp {
    @apply bg-green-500/20 text-green-300 border border-green-500/30;
  }

  .site-title {
    @apply text-2xl md:text-3xl font-black text-ink mb-2;
    transition: color 300ms ease;
  }

  .site-card-coral:hover .site-title {
    color: #fb923c;
  }

  .site-card-kelp:hover .site-title {
    color: #4ade80;
  }

  .site-dynamics {
    @apply text-muted text-sm mb-6;
    font-style: italic;
  }

  .site-resilience {
    @apply mb-6;
  }

  .resilience-heading {
    @apply text-xs font-bold uppercase tracking-wider text-muted mb-3;
  }

  .resilience-list {
    @apply space-y-2 list-none p-0 m-0;
  }

  .resilience-list li {
    @apply text-sm text-ink/70 leading-relaxed;
  }

  .r-label {
    @apply font-bold text-accent mr-2;
  }

  .site-card-coral .r-label {
    color: #fb923c;
  }

  .site-card-kelp .r-label {
    color: #4ade80;
  }

  .site-cta {
    @apply inline-flex items-center gap-2 font-bold text-sm;
    transition: gap 300ms ease;
  }

  .site-card-coral .site-cta {
    color: #fb923c;
  }

  .site-card-kelp .site-cta {
    color: #4ade80;
  }

  .site-card:hover .site-cta {
    @apply gap-3;
  }

  .site-accent {
    @apply absolute top-0 left-0 right-0 h-1;
  }

  .site-card-coral .site-accent {
    background: linear-gradient(90deg, #f97316, #fb923c);
  }

  .site-card-kelp .site-accent {
    background: linear-gradient(90deg, #22c55e, #4ade80);
  }

  .site-card-coral:hover {
    border-color: rgba(251, 146, 60, 0.4);
  }

  .site-card-kelp:hover {
    border-color: rgba(74, 222, 128, 0.4);
  }

  .btn-outline-editorial {
    @apply inline-flex items-center gap-2 px-6 py-3;
    @apply text-white font-bold text-sm;
    @apply border border-white/30 rounded-full no-underline;
    @apply transition-all duration-300;
  }

  .btn-outline-editorial:hover {
    @apply border-accent bg-accent/10 gap-3;
  }

  /* ============================================
     News Section - Editorial Grid
     ============================================ */
  .news-section {
    @apply relative py-20 md:py-28 pb-28 md:pb-36 overflow-hidden;
    background: linear-gradient(180deg, #0b1929 0%, #0f172a 50%, #0b1929 100%);
  }

  .news-bg {
    @apply absolute inset-0;
  }

  .news-gradient-overlay {
    @apply absolute inset-0;
    background: radial-gradient(ellipse at center, transparent 0%, rgba(11, 25, 41, 0.5) 100%);
  }

  .news-header {
    @apply flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4 mb-10;
  }

  .news-editorial-grid {
    @apply grid md:grid-cols-3 gap-6 lg:gap-8;
  }

  .news-editorial-card {
    @apply rounded-2xl overflow-hidden;
    @apply bg-white/[0.03] border border-white/10;
    @apply backdrop-blur-sm;
    transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .news-editorial-card:hover {
    @apply bg-white/[0.06];
    transform: translateY(-6px);
    border-color: rgba(56, 189, 248, 0.3);
    box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.4);
  }

  .news-featured {
    @apply md:col-span-2 md:row-span-2;
  }

  .news-editorial-link {
    @apply block no-underline h-full;
  }

  .news-featured .news-editorial-link {
    @apply flex flex-col md:flex-row md:h-full;
  }

  .news-editorial-image {
    @apply relative aspect-[16/10] overflow-hidden;
  }

  .news-featured .news-editorial-image {
    @apply md:w-1/2 md:aspect-auto;
  }

  .news-editorial-image img {
    @apply w-full h-full object-cover;
    transition: transform 600ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .news-editorial-card:hover .news-editorial-image img {
    transform: scale(1.05);
  }

  .news-image-overlay {
    @apply absolute inset-0;
    background: linear-gradient(to top, rgba(10, 15, 25, 0.4) 0%, transparent 50%);
  }

  .news-editorial-body {
    @apply p-6 flex flex-col;
  }

  .news-featured .news-editorial-body {
    @apply md:w-1/2 md:p-8 md:justify-center;
  }

  .news-meta {
    @apply flex items-center gap-3 mb-3;
  }

  .news-date {
    @apply text-xs text-white/40;
  }

  .news-category {
    @apply text-[10px] font-bold uppercase tracking-wider text-accent;
  }

  .news-editorial-title {
    @apply text-lg font-bold text-white mb-3 leading-snug;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    transition: color 200ms ease;
  }

  .news-featured .news-editorial-title {
    @apply text-2xl md:text-3xl;
    -webkit-line-clamp: 3;
  }

  .news-editorial-card:hover .news-editorial-title {
    @apply text-accent;
  }

  .news-editorial-excerpt {
    @apply text-white/50 text-sm leading-relaxed mb-4;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .news-read-more {
    @apply inline-flex items-center gap-2 text-accent text-sm font-bold mt-auto;
    transition: gap 300ms ease;
  }

  .news-editorial-card:hover .news-read-more {
    @apply gap-3;
  }

  .news-mobile-link {
    @apply text-center mt-10;
  }

  /* ============================================
     About Section - Editorial Layout
     ============================================ */
  .about-section {
    @apply relative py-20 md:py-28 pb-28 md:pb-36 bg-surface;
  }

  .about-editorial {
    @apply grid lg:grid-cols-2 gap-12 lg:gap-20 items-center;
  }

  .about-content .section-title-editorial {
    @apply text-left;
  }

  .about-text {
    @apply text-muted text-lg leading-relaxed mb-8;
  }

  .pi-editorial-card {
    @apply flex items-center gap-5 p-5 rounded-xl mb-8;
    @apply bg-surface-card border border-line/50 no-underline;
    transition: all 300ms ease;
  }

  .pi-editorial-card:hover {
    @apply border-accent/30;
    box-shadow: 0 10px 30px -8px rgba(0, 0, 0, 0.2);
  }

  .pi-avatar {
    @apply w-16 h-16 rounded-full object-cover flex-shrink-0;
    @apply ring-2 ring-accent/30;
  }

  .pi-details {
    @apply flex flex-col flex-1 min-w-0;
  }

  .pi-name {
    @apply text-base font-bold text-ink;
  }

  .pi-role {
    @apply text-xs font-bold uppercase tracking-wide text-accent;
  }

  .pi-bio {
    @apply text-xs text-muted mt-1 line-clamp-2;
  }

  .pi-arrow {
    @apply w-5 h-5 text-accent/40 flex-shrink-0;
    transition: all 200ms ease;
  }

  .pi-editorial-card:hover .pi-arrow {
    @apply text-accent;
    transform: translateX(4px);
  }

  .about-stats-grid {
    @apply grid grid-cols-2 gap-5;
  }

  .stat-editorial {
    @apply p-6 lg:p-8 rounded-2xl text-center;
    @apply bg-surface-card border border-line/50;
    transition: all 300ms ease;
  }

  .stat-editorial:hover {
    transform: translateY(-4px);
    border-color: rgba(56, 189, 248, 0.3);
    box-shadow: 0 15px 30px -8px rgba(0, 0, 0, 0.2);
  }

  .stat-value {
    @apply text-4xl lg:text-5xl font-black text-accent inline;
    font-variant-numeric: tabular-nums;
  }

  .stat-suffix {
    @apply text-xl lg:text-2xl font-bold text-accent/60 ml-0.5;
  }

  .stat-label {
    @apply block text-xs font-bold text-muted uppercase tracking-wider mt-2;
  }

  /* ============================================
     Final CTA Section
     ============================================ */
  .final-cta {
    @apply relative py-20 md:py-28 overflow-hidden;
    background: linear-gradient(180deg, #0b1929 0%, #0f172a 100%);
  }

  .final-cta-bg {
    @apply absolute inset-0 overflow-hidden;
  }

  .cta-orb {
    @apply absolute rounded-full;
    filter: blur(120px);
  }

  .cta-orb-1 {
    @apply w-[400px] h-[400px] top-0 left-1/4;
    background: radial-gradient(circle, rgba(56, 189, 248, 0.15), transparent 70%);
  }

  .cta-orb-2 {
    @apply w-[350px] h-[350px] bottom-0 right-1/4;
    background: radial-gradient(circle, rgba(45, 212, 191, 0.12), transparent 70%);
  }

  .cta-editorial-grid {
    @apply grid md:grid-cols-2 gap-6 lg:gap-8;
  }

  .cta-editorial-card {
    @apply relative p-8 md:p-10 rounded-2xl overflow-hidden text-center;
  }

  .cta-card-join {
    @apply border border-accent/30;
    background: linear-gradient(135deg, rgba(56, 189, 248, 0.08) 0%, transparent 100%);
  }

  .cta-card-join::before {
    content: '';
    @apply absolute inset-0 opacity-40;
    background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.2), transparent 50%);
  }

  .cta-card-funders {
    @apply border border-accent-2/30;
    background: linear-gradient(135deg, rgba(45, 212, 191, 0.08) 0%, transparent 100%);
  }

  .cta-card-funders::before {
    content: '';
    @apply absolute inset-0 opacity-40;
    background: radial-gradient(circle at top right, rgba(45, 212, 191, 0.2), transparent 50%);
  }

  .cta-editorial-eyebrow {
    @apply text-[10px] font-bold uppercase tracking-[0.2em] text-accent mb-4 block relative z-10;
  }

  .cta-eyebrow-alt {
    @apply text-accent-2;
  }

  .cta-editorial-title {
    @apply text-2xl md:text-3xl font-black text-white mb-4 relative z-10;
  }

  .cta-editorial-desc {
    @apply text-white/50 mb-6 max-w-sm mx-auto relative z-10;
  }

  .btn-cta-editorial {
    @apply inline-flex items-center gap-2 px-6 py-3;
    @apply font-bold text-sm rounded-full no-underline;
    @apply transition-all duration-300 relative z-10;
  }

  .btn-cta-editorial:hover {
    @apply gap-3;
    transform: translateY(-2px);
  }

  .btn-cta-primary {
    @apply bg-accent text-white;
  }

  .btn-cta-primary:hover {
    box-shadow: 0 10px 30px -5px rgba(56, 189, 248, 0.4);
  }

  .btn-cta-secondary {
    @apply border-2 border-accent-2/50 text-white;
  }

  .btn-cta-secondary:hover {
    @apply border-accent-2 bg-accent-2/10;
  }

  /* Centered CTA Layout */
  .cta-centered {
    @apply max-w-2xl mx-auto text-center;
  }

  .cta-centered-title {
    @apply text-3xl md:text-4xl lg:text-5xl font-black text-white mb-6 leading-tight;
  }

  .cta-centered-desc {
    @apply text-lg text-white/60 mb-8 leading-relaxed;
  }

  .cta-centered-actions {
    @apply flex flex-col items-center gap-4;
  }

  .btn-cta-link {
    @apply text-sm text-white/50 no-underline transition-colors;
  }

  .btn-cta-link:hover {
    @apply text-accent-2;
  }

  /* ============================================
     Responsive
     ============================================ */
  @media (max-width: 768px) {
    .hero {
      padding-bottom: 3rem;
    }

    .hero-content {
      padding-top: 5rem;
      padding-bottom: 0;
    }

    .hero-masthead {
      @apply hidden;
    }

    .hero-title-block {
      @apply mb-4;
    }

    .title-line-1,
    .title-line-2,
    .title-line-3 {
      @apply text-3xl;
      margin-left: 0;
    }

    .title-line-2 {
      margin-left: 0.2em;
    }

    .title-line-3 {
      margin-left: 0.4em;
    }

    .hero-tagline-wrapper {
      @apply mb-3;
    }

    .tagline-accent {
      height: 36px;
    }

    .hero-tagline {
      @apply text-base;
    }

    .hero-desc {
      @apply text-xs mb-4;
    }

    .hero-actions {
      @apply gap-2;
    }

    .btn-editorial-primary,
    .btn-editorial-secondary {
      @apply px-4 py-2.5 text-xs;
    }

  }

  /* ============================================
     Reduced Motion
     ============================================ */
  @media (prefers-reduced-motion: reduce) {
    .hero-image {
      animation: none;
      transform: scale(1);
    }

    .scroll-cue {
      animation: none;
      opacity: 1;
    }

    .scroll-cue-line {
      animation: none;
    }

    .site-card,
    .news-editorial-card,
    .stat-editorial,
    .pi-editorial-card {
      transition: none;
    }

    .site-image img,
    .news-editorial-image img {
      transition: none;
    }
  }
</style>

<script>
  // Parallax effect for hero
  const initParallax = () => {
    const heroImage = document.querySelector('.hero-image') as HTMLElement;
    if (!heroImage) return;

    let ticking = false;

    const handleScroll = () => {
      if (!ticking) {
        requestAnimationFrame(() => {
          const scrolled = window.scrollY;
          const rate = scrolled * 0.3;
          heroImage.style.transform = `scale(1) translateY(${rate}px)`;
          ticking = false;
        });
        ticking = true;
      }
    };

    if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      window.addEventListener('scroll', handleScroll, { passive: true });
    }
  };

  // Count-up animation for stats
  const initCountUp = () => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const el = entry.target as HTMLElement;
            const target = parseInt(el.dataset.target || '0', 10);
            el.textContent = '0';
            animateCount(el, target);
            observer.unobserve(el);
          }
        });
      },
      { threshold: 0.5 }
    );

    document.querySelectorAll('.stat-value[data-target]').forEach((el) => {
      observer.observe(el);
    });
  };

  const animateCount = (el: HTMLElement, target: number) => {
    const duration = 1800;
    const start = performance.now();

    const update = (currentTime: number) => {
      const elapsed = currentTime - start;
      const progress = Math.min(elapsed / duration, 1);
      const eased = 1 - Math.pow(1 - progress, 4);
      const current = Math.round(eased * target);

      el.textContent = current.toString();

      if (progress < 1) {
        requestAnimationFrame(update);
      }
    };

    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      el.textContent = target.toString();
    } else {
      requestAnimationFrame(update);
    }
  };

  // Initialize
  initParallax();
  initCountUp();

  // Re-init after view transitions
  document.addEventListener('astro:after-swap', () => {
    initParallax();
    initCountUp();
  });
</script>
