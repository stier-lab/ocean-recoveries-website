---
import Layout from '@layouts/Layout.astro';

// SVG icons for each value (inline for performance)
const icons = {
  'rigorous-science': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" />`,
  'open-reproducible': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />`,
  'collaborative-spirit': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />`,
  'mentorship': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5" />`,
  'actionable-impact': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9l3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605" />`,
  'inclusive-culture': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4.5c-1.5 0-2.5 1-2.5 2.5s1 2.5 2.5 2.5 2.5-1 2.5-2.5-1-2.5-2.5-2.5zm-5 6c-1.25 0-2 .75-2 2s.75 2 2 2 2-.75 2-2-.75-2-2-2zm10 0c-1.25 0-2 .75-2 2s.75 2 2 2 2-.75 2-2-.75-2-2-2zm-5 4c-1.25 0-2 .75-2 2s.75 2 2 2 2-.75 2-2-.75-2-2-2z" />`,
  'long-term-thinking': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />`,
  'grounded-optimism': `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />`,
};

// Lab values with supporting content
const values = [
  {
    id: 'rigorous-science',
    title: 'Rigorous Science',
    headline: 'We let the data lead.',
    description: 'Good science requires honesty — with ourselves, our collaborators, and the world. We design experiments carefully, analyze data transparently, and report findings whether they confirm or challenge our expectations.',
    image: '/images/research-team-boats-turquoise-lagoon.webp',
    imageAlt: 'Research team conducting fieldwork in turquoise lagoon',
  },
  {
    id: 'open-reproducible',
    title: 'Open & Reproducible',
    headline: 'Science that others can build on.',
    description: 'We share our data, code, and methods openly. Preprints, public repositories, and documented workflows are standard practice — not extras. When others can reproduce our findings and build on our work, science moves faster and trust grows. Closed science is slow science.',
    image: '/images/ucsb-campus.jpeg',
    imageAlt: 'UC Santa Barbara campus',
  },
  {
    id: 'collaborative-spirit',
    title: 'Collaborative Spirit',
    headline: 'Science is a team sport.',
    description: 'The questions we care about are too big for any one person or lab. We actively seek partnerships across disciplines, institutions, and sectors. We share credit generously, mentor openly, and believe that diverse perspectives make our science stronger. The best ideas often emerge from unexpected conversations.',
    image: '/images/research-team-group-photo-beach.jpeg',
    imageAlt: 'Lab team group photo on beach',
  },
  {
    id: 'mentorship',
    title: 'Mentorship & Growth',
    headline: 'Investing in the next generation.',
    description: 'Training scientists is as important as doing science. We prioritize thoughtful mentorship at every career stage — from undergraduates discovering research for the first time to postdocs preparing for independent careers. We celebrate growth, provide honest feedback, and create opportunities for lab members to develop their unique strengths.',
    image: '/images/researcher-on-boat-ocean-fieldwork.jpg',
    imageAlt: 'Researcher conducting ocean fieldwork',
  },
  {
    id: 'actionable-impact',
    title: 'Actionable Impact',
    headline: 'Research that reaches beyond the journal.',
    description: 'We do not study ocean recovery in the abstract — we want our work to matter for real ecosystems and real communities. This means engaging with managers, policymakers, and local stakeholders from the start, translating findings into actionable guidance, and measuring success by outcomes in the water, not just citations.',
    image: '/images/kelp-forest-fish-school-underwater.jpeg',
    imageAlt: 'Thriving kelp forest ecosystem with fish',
  },
  {
    id: 'inclusive-culture',
    title: 'Inclusive Culture',
    headline: 'Everyone belongs in ocean science.',
    description: 'Science has historically excluded many voices. We recruit from HSIs and HBCUs, use structured interviews to reduce bias, and host annual SACNAS workshops. Half our current grad students are first-generation college graduates.',
    image: '/images/coral-reef-panorama-anthias-fish.jpeg',
    imageAlt: 'Diverse coral reef ecosystem with colorful fish',
  },
  {
    id: 'long-term-thinking',
    title: 'Long-Term Thinking',
    headline: 'Recovery takes patience.',
    description: 'Ecosystems operate on timescales longer than grant cycles or academic careers. We invest in long-term monitoring, maintain research relationships over decades, and resist the pressure to chase short-term wins. Understanding recovery requires watching it unfold — there are no shortcuts.',
    image: '/images/giant-kelp-sunlight-underwater.jpeg',
    imageAlt: 'Giant kelp reaching toward sunlight',
  },
  {
    id: 'grounded-optimism',
    title: 'Grounded Optimism',
    headline: 'Hope backed by evidence.',
    description: "It would be easy to despair about the state of the oceans. We choose a different path: clear-eyed about the challenges, but motivated by cases like Moorea's 85% coral recovery after 2010 or California lobster populations doubling inside MPAs. We've watched these ecosystems rebuild.",
    image: '/images/chromis-acropora.jpeg',
    imageAlt: 'Healthy coral with fish swimming among branches',
  },
];

// Structured data for SEO
const structuredData = {
  "@context": "https://schema.org",
  "@type": "AboutPage",
  "name": "Ocean Recoveries Lab Values",
  "description": "The principles that guide the Ocean Recoveries Lab — rigorous science, collaborative spirit, mentorship, and actionable impact for ocean conservation.",
  "mainEntity": {
    "@type": "ResearchOrganization",
    "name": "Ocean Recoveries Lab",
    "url": "https://www.oceanrecoveries.com",
    "parentOrganization": {
      "@type": "CollegeOrUniversity",
      "name": "UC Santa Barbara"
    },
    "knowsAbout": values.map(v => v.title)
  }
};
---

<Layout
  title="Values"
  description="The principles that guide the Ocean Recoveries Lab — rigorous science, open methods, mentorship, and actionable impact for ocean conservation."
  image="/images/research-team-group-photo-beach.jpeg"
>
  <!-- Structured Data -->
  <script is:inline type="application/ld+json" set:html={JSON.stringify(structuredData)} />

  <!-- Hero -->
  <section class="relative py-20 md:py-28 overflow-hidden">
    <div
      class="absolute inset-0 bg-cover bg-center"
      style="background-image: url('/images/tropical-island-aerial-view-lagoon-reef.jpeg');"
    >
      <div class="absolute inset-0 bg-navy-deep/60 md:bg-navy-deep/75"></div>
    </div>

    <!-- Floating Bubbles -->
    <div class="floating-bubbles" aria-hidden="true">
      <div class="bubble bubble-1"></div>
      <div class="bubble bubble-2"></div>
      <div class="bubble bubble-3"></div>
      <div class="bubble bubble-4"></div>
    </div>

    <div class="relative z-10 container text-center text-white">
      <span class="eyebrow text-accent-2">Who We Are</span>
      <h1 class="hero-title mb-4">
        <span class="gradient-text">Our Values</span>
      </h1>
      <p class="hero-desc text-xl text-white/80 max-w-2xl mx-auto mb-8">
        The principles that shape how we do science, build community, and work toward ocean recovery.
      </p>

      <!-- Quick Navigation -->
      <nav class="values-nav" aria-label="Jump to value">
        <ul class="flex flex-wrap justify-center gap-2 md:gap-3">
          {values.map((value) => (
            <li>
              <a href={`#${value.id}`} class="value-nav-link">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <Fragment set:html={icons[value.id as keyof typeof icons]} />
                </svg>
                <span class="hidden sm:inline">{value.title}</span>
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </section>

  <!-- Values Sections -->
  {values.map((value, index) => (
    <section
      id={value.id}
      class={`value-section ${index % 2 === 0 ? 'bg-surface' : 'bg-navy-highlight'}`}
    >
      <div class="container">
        <div class={`value-content ${index % 2 === 1 ? 'md:flex-row-reverse' : ''}`}>
          <!-- Text Content -->
          <div class="value-text scroll-reveal">
            <div class="value-header">
              <div class="value-icon" aria-hidden="true">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <Fragment set:html={icons[value.id as keyof typeof icons]} />
                </svg>
              </div>
              <span class="value-number">{String(index + 1).padStart(2, '0')}</span>
            </div>
            <h2 class="value-title">{value.title}</h2>
            <p class="value-headline">{value.headline}</p>
            <p class="value-description">{value.description}</p>
          </div>

          <!-- Image -->
          <div class={`value-image scroll-reveal ${index % 2 === 0 ? 'stagger-2' : 'stagger-1'}`}>
            <div class="value-image-wrapper">
              <img
                src={value.image}
                alt={value.imageAlt}
                loading={index < 2 ? 'eager' : 'lazy'}
              />
            </div>
          </div>
        </div>
      </div>
    </section>
  ))}

  <!-- Closing CTA -->
  <section class="section bg-navy-deep">
    <div class="container">
      <div class="closing-card scroll-reveal">
        <h2 class="text-white text-center mb-4">Sound like your kind of lab?</h2>
        <p class="text-white/70 text-center max-w-xl mx-auto mb-8">
          We are always looking for people who share these values and want to contribute to ocean recovery.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="/people" class="btn btn-secondary">
            Meet the Team
          </a>
          <a href="/join" class="btn btn-primary">
            Join Us
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Floating Bubbles */
  .floating-bubbles {
    @apply absolute inset-0 overflow-hidden pointer-events-none;
    z-index: 1;
  }

  .bubble {
    @apply absolute rounded-full;
    background: radial-gradient(circle at 30% 30%, rgba(56, 189, 248, 0.3), rgba(45, 212, 191, 0.1));
    animation: float-up linear infinite;
    opacity: 0;
  }

  .bubble-1 { width: 20px; height: 20px; left: 15%; animation-duration: 12s; animation-delay: 0s; }
  .bubble-2 { width: 30px; height: 30px; left: 40%; animation-duration: 15s; animation-delay: 2s; }
  .bubble-3 { width: 25px; height: 25px; left: 65%; animation-duration: 13s; animation-delay: 4s; }
  .bubble-4 { width: 18px; height: 18px; left: 85%; animation-duration: 11s; animation-delay: 1s; }

  @keyframes float-up {
    0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
    10% { opacity: 0.6; }
    90% { opacity: 0.6; }
    100% { transform: translateY(-100px) scale(1); opacity: 0; }
  }

  /* Gradient Text */
  .gradient-text {
    background: linear-gradient(135deg, #ffffff 0%, #38bdf8 40%, #2dd4bf 80%, #38bdf8 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-shift 8s ease-in-out infinite;
  }

  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .hero-title {
    animation: fadeUp 0.8s ease-out forwards;
    opacity: 0;
  }

  .hero-desc {
    animation: fadeUp 0.8s ease-out 0.2s forwards;
    opacity: 0;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Quick Navigation */
  .values-nav {
    @apply mt-6;
  }

  .value-nav-link {
    @apply inline-flex items-center gap-1.5 px-3 py-2 rounded-full text-sm font-medium;
    @apply bg-white/10 text-white/80 no-underline;
    @apply border border-white/20;
    @apply transition-all duration-200;
  }

  .value-nav-link:hover {
    @apply bg-white/20 text-white border-white/40;
    @apply -translate-y-0.5;
  }

  /* Value Section Layout */
  .value-section {
    @apply py-16 md:py-24 overflow-hidden scroll-mt-20;
  }

  .value-content {
    @apply flex flex-col md:flex-row items-center gap-10 lg:gap-16;
  }

  /* Text Styling */
  .value-text {
    @apply flex-1 max-w-lg;
  }

  .value-header {
    @apply flex items-center gap-3 mb-3;
  }

  .value-icon {
    @apply w-10 h-10 rounded-xl flex items-center justify-center;
    @apply bg-accent/20 text-accent;
    @apply transition-all duration-300;
    position: relative;
  }

  /* Animated value icons - each with unique micro-animation */
  .value-icon::before {
    content: '';
    @apply absolute inset-0 rounded-xl opacity-0;
    @apply transition-opacity duration-300;
    background: radial-gradient(circle at center, rgba(56, 189, 248, 0.3), transparent 70%);
  }

  .value-text:hover .value-icon {
    @apply scale-110;
    box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
  }

  .value-text:hover .value-icon::before {
    @apply opacity-100;
    animation: icon-pulse 1.5s ease-in-out infinite;
  }

  .value-text:hover .value-icon svg {
    animation: icon-animate 0.8s ease-in-out;
  }

  /* Different animations for different icons */
  #rigorous-science .value-icon svg { animation-name: icon-bubble; }
  #open-reproducible .value-icon svg { animation-name: icon-expand; }
  #collaborative-spirit .value-icon svg { animation-name: icon-wiggle; }
  #mentorship .value-icon svg { animation-name: icon-rise; }
  #actionable-impact .value-icon svg { animation-name: icon-chart; }
  #inclusive-culture .value-icon svg { animation-name: icon-gather; }
  #long-term-thinking .value-icon svg { animation-name: icon-spin; }
  #grounded-optimism .value-icon svg { animation-name: icon-shine; }

  @keyframes icon-pulse {
    0%, 100% { transform: scale(1); opacity: 0.3; }
    50% { transform: scale(1.3); opacity: 0.6; }
  }

  @keyframes icon-bubble {
    0%, 100% { transform: translateY(0) scale(1); }
    25% { transform: translateY(-2px) scale(1.05); }
    75% { transform: translateY(1px) scale(0.98); }
  }

  @keyframes icon-expand {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }

  @keyframes icon-wiggle {
    0%, 100% { transform: rotate(0deg); }
    20% { transform: rotate(-8deg); }
    40% { transform: rotate(8deg); }
    60% { transform: rotate(-5deg); }
    80% { transform: rotate(5deg); }
  }

  @keyframes icon-rise {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }

  @keyframes icon-chart {
    0% { transform: scaleY(1); }
    50% { transform: scaleY(1.1); }
    100% { transform: scaleY(1); }
  }

  @keyframes icon-gather {
    0%, 100% { transform: scale(1); }
    25% { transform: scale(0.95) rotate(-5deg); }
    50% { transform: scale(1.1); }
    75% { transform: scale(0.95) rotate(5deg); }
  }

  @keyframes icon-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  @keyframes icon-shine {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.3); }
  }

  .value-number {
    @apply text-accent/30 text-4xl font-black leading-none;
    font-variant-numeric: tabular-nums;
  }

  .value-title {
    @apply text-ink text-2xl md:text-3xl font-black mb-3;
  }

  .value-headline {
    @apply text-accent text-lg md:text-xl font-bold mb-4 max-w-none;
  }

  .value-description {
    @apply text-muted leading-relaxed max-w-none;
  }

  /* Image Styling */
  .value-image {
    @apply flex-1 w-full max-w-lg;
  }

  .value-image-wrapper {
    @apply relative rounded-2xl overflow-hidden shadow-xl;
    @apply aspect-[4/3];
  }

  .value-image-wrapper::after {
    content: '';
    @apply absolute inset-0 rounded-2xl;
    @apply ring-1 ring-inset ring-white/10;
    pointer-events: none;
  }

  .value-image-wrapper img {
    @apply w-full h-full object-cover;
    @apply transition-transform duration-700 ease-out;
  }

  .value-image-wrapper:hover img {
    @apply scale-105;
  }

  /* Closing Card */
  .closing-card {
    @apply bg-gradient-to-br from-accent/10 to-accent-2/10;
    @apply border border-accent/20 rounded-2xl p-8 md:p-12;
    @apply max-w-2xl mx-auto;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .value-content {
      @apply text-center;
    }

    .value-text {
      @apply max-w-none;
    }

    .value-header {
      @apply justify-center;
    }

    .value-number {
      @apply text-3xl;
    }

    .value-nav-link {
      @apply p-2;
    }
  }

  /* Smooth scroll offset for fixed nav */
  html {
    scroll-behavior: smooth;
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .hero-title,
    .hero-desc,
    .gradient-text,
    .bubble,
    .value-image-wrapper img,
    .value-icon,
    .value-icon::before,
    .value-icon svg {
      animation: none !important;
      transition: none !important;
    }
    .hero-title,
    .hero-desc {
      opacity: 1;
    }
    .value-text:hover .value-icon {
      transform: none;
      box-shadow: none;
    }
  }
</style>

<script>
  // Highlight active section in navigation
  const initActiveNav = () => {
    const sections = document.querySelectorAll('.value-section');
    const navLinks = document.querySelectorAll('.value-nav-link');

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const id = entry.target.id;
            navLinks.forEach((link) => {
              const href = link.getAttribute('href');
              if (href === `#${id}`) {
                link.classList.add('active');
              } else {
                link.classList.remove('active');
              }
            });
          }
        });
      },
      { threshold: 0.3, rootMargin: '-80px 0px -50% 0px' }
    );

    sections.forEach((section) => observer.observe(section));
  };

  initActiveNav();
  document.addEventListener('astro:after-swap', initActiveNav);
</script>

<style>
  /* Active nav link state */
  .value-nav-link.active {
    @apply bg-accent text-white border-accent;
  }
</style>
