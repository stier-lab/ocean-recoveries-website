---
/**
 * Article Schema (JSON-LD)
 * For news articles and blog posts
 * Schema.org: https://schema.org/Article
 */

interface Props {
  title: string;
  description: string;
  datePublished: string;
  dateModified?: string;
  image?: string;
  authorName?: string;
  slug: string;
  keywords?: string[];
}

const {
  title,
  description,
  datePublished,
  dateModified,
  image,
  authorName = "Ocean Recoveries Lab",
  slug,
  keywords = []
} = Astro.props;

const articleUrl = `https://www.oceanrecoveries.com/news/${slug}`;
const imageUrl = image
  ? `https://www.oceanrecoveries.com${image.startsWith('/') ? image : '/' + image}`
  : "https://www.oceanrecoveries.com/images/og-default.jpg";

const articleSchema = {
  "@context": "https://schema.org",
  "@type": "Article",
  "@id": `${articleUrl}#article`,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": articleUrl
  },
  "headline": title,
  "description": description,
  "image": {
    "@type": "ImageObject",
    "url": imageUrl,
    "width": 1200,
    "height": 630
  },
  "datePublished": datePublished,
  "dateModified": dateModified || datePublished,
  "author": {
    "@type": "Organization",
    "@id": "https://www.oceanrecoveries.com/#organization",
    "name": authorName
  },
  "publisher": {
    "@type": "Organization",
    "@id": "https://www.oceanrecoveries.com/#organization",
    "name": "Ocean Recoveries Lab",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.oceanrecoveries.com/images/og-default.jpg",
      "width": 1200,
      "height": 630
    }
  },
  "isPartOf": {
    "@type": "WebSite",
    "@id": "https://www.oceanrecoveries.com/#website",
    "name": "Ocean Recoveries Lab",
    "url": "https://www.oceanrecoveries.com"
  },
  "about": [
    {
      "@type": "Thing",
      "name": "Marine Science"
    },
    {
      "@type": "Thing",
      "name": "Ocean Conservation"
    }
  ],
  ...(keywords.length > 0 ? { "keywords": keywords.join(", ") } : {})
};
---

<script type="application/ld+json" set:html={JSON.stringify(articleSchema)} />
